# Отчёт по 4-му ДЗ (В млём случае разобраться с Accumulo)

Начнём по порядку вопросов

### a. История развития СУБД?

Много информации на эту тему нарыть сложно, так как изначально проект создавался Агенством Национальной Безопасности США, поэтому вот что мне удалось отыскать: 

Accumulo был создан в 2008 году Агентством национальной безопасности США и внесен в Apache Foundation в качестве инкубаторного проекта в сентябре 2011 года.
21 марта 2012 года Accumulo вышел из инкубатора Apache, став проектом высшего уровня. 

Из интересной, но менее подтверждённой информации я нашёл вот эти данные:

В июне 2012 года Комитет по вооруженным силам Сената США (SASC) опубликовал проект закона о полномочиях Министерства обороны (DoD) на 2012 год, в котором содержались ссылки на Apache Accumulo. В законопроекте SASC требовал от DoD оценить, сможет ли Apache Accumulo достичь коммерческой жизнеспособности, прежде чем внедрять его в DoD. Конкретные критерии не были включены в формулировку законопроекта, но создание коммерческих организаций, поддерживающих Apache Accumulo, могло считаться фактором успеха.

### b. Инструменты для взаимодействия с СУБД?

Accumulo использует HDFS от Apache Hadoop для хранения данных и Apache ZooKeeper для консенсуса. И, хотя многие пользователи взаимодействуют с Accumulo напрямую, используя API (https://accumulo.apache.org/api/), несколько проектов с открытым исходным кодом используют Accumulo в качестве базового хранилища. Их там многа разных, так что, если заинтересует, тот тут можно посмотреть одни из самых распространённых проектов: https://accumulo.apache.org/related-projects/

### c. Какой database engine используется в вашей СУБД?

Это система, построенная на базе Apache Hadoop, Apache ZooKeeper и Apache Thrift. Интересный факт - Accumulo является третьим по популярности хранилищем широких колонок NoSQL после Apache Cassandra и HBase и 67-м по популярности database engine любого типа по состоянию на 2018 год.

### d. Как устроен язык запросов в вашей СУБД? Разверните БД с данными и выполните ряд запросов. 

Accumulo - это большое хранилище ключей/значений. Запись данных в Accumulo отличается гибкостью и скоростью. Как и любая база данных, Accumulo хранит данные в таблицах и строках. Каждая строка в таблице Accumulo может содержать множество пар ключ/значение.

Поскольку основным способом взаимодействия с Accumulo является Java API, в производственных средах часто требуется реализация слоя запросов. Это можно сделать с помощью веб-сервисов в контейнерах, таких как Apache Tomcat, но это не является обязательным условием. Уровень Query Services Layer предоставляет механизм для создания платформы, на которой могут быть построены приложения, ориентированные на пользователя. Это позволяет разработчикам приложений изолировать потенциально сложную логику запросов и обеспечивает удобную точку для выполнения основных функций безопасности.

Некоторые производственные среды предпочитают реализовывать аутентификацию на этом уровне, где идентификаторы пользователей используются для получения их учетных данных доступа, которые затем кэшируются на уровне запросов и предоставляются Accumulo через механизм авторизации.

### e. Распределение файлов БД по разным носителям?

На сколько я понял - поддерживается, но какую-то конкретную инфу нарыть не смог.

### f. На каком языке/ах программирования написана СУБД?

Accumulo написана на Java и имеет метки доступа на уровне ячеек и механизмы программирования на стороне сервера. 

### g. Какие типы индексов поддерживаются в БД? Приведите пример создания индексов.

Для поддержки поиска по более чем одному атрибуту сущности можно построить дополнительные индексы. Однако, поскольку таблицы Accumulo могут поддерживать любое количество столбцов без их предварительного указания, для поддержки поиска записей в основной таблице часто достаточно одного дополнительного индекса. В данном случае индекс имеет в качестве идентификатора строки значение или термин из основной таблицы, семейства столбцов одинаковы, а классификатор столбцов индексной таблицы содержит идентификатор строки из основной таблицы.

Примечание: В Accumulo идентификаторы строк хранятся в классификаторе столбца, а не в Value, чтобы иметь возможность иметь более одного идентификатора строки, связанного с определенным термином в индексе. Если бы его хранили в Value, мы бы видели только одну из строк, в которой появляется значение, поскольку Accumulo по умолчанию настроен на возврат одного самого последнего значения, связанного с ключом.

Поиск можно выполнить, сначала просканировав индексную таблицу на наличие нужных значений в указанных столбцах, что вернет список идентификаторов строк из основной таблицы. Затем они могут быть использованы для получения каждой совпадающей записи полностью или подмножества ее столбцов из основной таблицы.

Для поддержки эффективного поиска нескольких идентификаторов строк из одной таблицы клиентская библиотека Accumulo предоставляет BatchScanner. Пользователи задают набор диапазонов BatchScanner, который выполняет поиск в несколько потоков на нескольких серверах и возвращает итератор всех полученных строк. Возвращаемые строки НЕ отсортированы, как в случае с базовым интерфейсом Scanner.

Одним из преимуществ динамической схемы Accumulo является то, что различные поля могут быть проиндексированы в одной и той же физической таблице. Однако может потребоваться создание разных таблиц индексов, если термины должны быть отформатированы по-разному, чтобы сохранить правильный порядок сортировки. Например, вещественные числа должны быть отформатированы иначе, чем их обычная нотация, чтобы их можно было правильно отсортировать. В таких случаях обычно достаточно одного индекса для каждого уникального типа данных.

### h. Как строится процесс выполнения запросов в вашей СУБД?

Про это полноценной информации пока найти не смог.

### i. Есть ли для вашей СУБД понятие «план запросов»? Если да, объясните, как работает данный этап.

Аналогично, как и в предыдущем

### j. Поддерживаются ли транзакции в вашей СУБД? Если да, то расскажите о нем. Если нет, то существует ли альтернатива?

Поддерживаются, по мере чтения документации не раз натыкался на их упоминания, как найду более подробную инфу - дополню.

### k. Какие методы восстановления поддерживаются в вашей СУБД. Расскажите о них.

В случае сбоя TabletServer или ошибки при выключении Accumulo некоторые мутации могут быть неправильно уплотнены в HDFS. В этом случае Accumulo автоматически повторно применит мутации из журнала записи вперед либо когда планшеты с отказавшего сервера будут переназначены мастером (в случае отказа одного TabletServer), либо при следующем запуске Accumulo (в случае отказа при выключении).

Восстановление выполняется путем запроса сервера планшетов на сортировку журналов, чтобы планшеты могли легко найти недостающие обновления. Состояние сортировки каждого файла отображается на странице состояния монитора Accumulo. По завершении восстановления все задействованные планшеты должны вернуться в состояние «онлайн». До этого момента эти планшеты будут недоступны для клиентов.

Клиентская библиотека Accumulo настроена на повторные попытки неудачных мутаций, и во многих случаях клиенты смогут продолжить обработку после процесса восстановления без выброса исключения.

### l. Расскажите про шардинг в вашей конкретной СУБД. Какие типы используются? Принцип работы.

По мере роста объема данных Accumulo будет разбивать таблицы на более мелкие части, называемые планшетами, которые можно распределять между несколькими серверами-планшетами. По умолчанию таблица разбивается на планшеты по границам строк, что гарантирует, что вся строка будет находиться на одном сервере планшетов. У нас есть возможность указать Accumulo, где разбивать таблицы, задав точки разбиения. Это делается с помощью addSplits в API TableOperations. На изображении ниже показано, как Accumulo разделяет данные.

![alt text](https://accumulo.apache.org/images/docs/data_distribution.png)

### m. Возможно ли применить термины Data Mining, Data Warehousing и OLAP в вашей СУБД?

### n. Какие методы защиты поддерживаются вашей СУБД? Шифрование трафика, модели авторизации и т.п.

Accumulo расширяет модель данных BigTable для реализации механизма безопасности, известного как безопасность на уровне ячеек. Каждая пара ключ-значение имеет свою метку безопасности, хранящуюся в элементе видимости столбца ключа, которая используется для определения того, соответствует ли данный пользователь требованиям безопасности для чтения значения. Это позволяет хранить в одной строке данные разного уровня безопасности, а пользователям с разной степенью доступа запрашивать одну и ту же таблицу, сохраняя при этом конфиденциальность данных.

### o. Какие сообщества развивают данную СУБД? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.

Копая на эту тему, я нашёл вот этот репозиторий (как я понимаю оффициальный репо Accumulo) https://github.com/apache/accumulo?tab=readme-ov-file

Как я понимаю, Accumulo открыто для контрибуторов, у них даже есть инструкция на офф сайте, как поучавствовать в развитии проекта: https://accumulo.apache.org/how-to-contribute/

### p. Создайте свои собственные данные для демонстрации работы СУБД. 

### q. Как продолжить самостоятельное изучение языка запросов с помощью демобазы. Если демобазы нет, то создайте ее.

Демобаза есть и даже больше - Accumulo рпедоставляет целый Тур по своим возможностям который полно охватывает все аспекты работы с Accumulo. Там присутствует как техническая информация, так и даже целые задания, помогающие лучше разобраться в устройстве БД

### r. Где найти документацию и пройти обучение

Во: https://accumulo.apache.org/
(половина инфы была взята от туда)

### s. Как быть в курсе происходящего

У Accumulo есть хороший сайт с документацией, на котором поддерживается актуальная информацию https://accumulo.apache.org/ + можно следить за их Git Репозиториями, например https://github.com/apache/accumulo.
